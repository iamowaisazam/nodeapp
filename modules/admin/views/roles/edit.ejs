<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Roles - Admin</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
    <%- include("../layouts/header.ejs") -%>

    <style>
      .permission_box {
        border-top: 1px solid lightgray;
      }
      
    </style>
</head>
<body>

  <!-- ======= Header ======= -->
  <%- include("../layouts/nav.ejs") -%>
  <!-- End Header -->

  <!-- ======= Sidebar ======= -->
  <%- include("../layouts/sidebar.ejs") -%>
  <!-- End Sidebar-->


   <!-- ======= Content ======= -->
  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Edit Role</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/admin">Home</a></li>
          <li class="breadcrumb-item active">roles</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->

    <section class="section">
        <div class="row">
            <div class="col-lg-12">

                <div class="card">
                  <div class="card-body pt-3">
                   
      
                    <!-- General Form Elements -->
                    <form action="/admin/roles/update/<%=data.id%>" method="post" >
                      <div class="row mb-3">
                        <label for="inputText" class="col-sm-2 col-form-label">Title</label>
                        <div class="col-sm-10">
                          <input name="title" required type="text" class="form-control" value="<%=data.name%>" />
                        </div>
                      </div>

                      <% permissions.permissions.forEach(function(item,prid) { %>

                        <div class="permission_box row ">
                          <label for="inputText" class="col-sm-2 col-form-label"><%=item.type%></label>
                          <div class="col-sm-10 align-self-center">

                            <div class="row">
                              <% 
                                  let permissionsName = item.name.split(",");
                                  let permissionsId = item.id.split(",");
                                  let permissionsTitle = item.title.split(",");  
                              %>

                              <% permissionsName.forEach(function(name,key) { %>
                                <% 
                                  let id = permissionsId[key];
                                  let title = permissionsTitle[key]; 
                                %>
                                  <div class="col-md-3">
                                      <div class="form-check form-switch">
                                            <input class="form-check-input" 
                                            type="checkbox" 
                                            id="flexSwitchCheckChecked<%=id%>" 
                                            name="perm<%=id%>"
                                            value="<%=id%>">
                                            <label class="form-check-label" for="flexSwitchCheckChecked<%=id%>"><%=title%></label>
                                       </div>
                                  </div>
                                <% }) %>

                        
                            </div>
                          </div>
                        </div>

                      <% }) %>

                  
                      <div class="row">
                        <div class="col-12 text-center">
                          <button type="submit" class="btn btn-primary">Update</button>
                        </div>
                      </div>
      
                    </form><!-- End General Form Elements -->
                  </div>
                </div>
              </div>
            </div>
      </section>
  </main>
   <!-- ======= Content ======= -->


  <!-- ======= Footer ======= -->
  <%- include("../layouts/footer.ejs") -%>
  <!-- End Footer -->
 
  <!-- ======= Scripts ======= -->
  <%- include("../layouts/scripts.ejs") -%>
  <!-- ======= Scripts ======= -->

</body>
</html>